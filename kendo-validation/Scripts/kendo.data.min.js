/*
* Kendo UI Complete v2012.3.1114 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(e,t){function r(t,n){if(t===n)return!0;var i,a=e.type(t),o=e.type(n);if(a!==o)return!1;if("date"===a)return t.getTime()===n.getTime();if("object"!==a&&"array"!==a)return!1;for(i in t)if(!r(t[i],n[i]))return!1;return!0}function n(e,t){var r,n;for(n in e){if(r=e[n],P(r)&&r.field&&r.field===t)return r;if(r===t)return r}return null}function i(e){this.data=e||[]}function a(e,r){if(e){var n=typeof e===J?{field:e,dir:r}:e,i=j(n)?n:n!==t?[n]:[];return L(i,function(e){return!!e.dir})}}function o(e){var t,r,n,i,a=e.filters;if(a)for(t=0,r=a.length;r>t;t++)n=a[t],i=n.operator,i&&typeof i===J&&(n.operator=St[i.toLowerCase()]||i),o(n)}function s(e){return e&&!G(e)?((j(e)||!e.filters)&&(e={logic:"and",filters:j(e)?e:[e]}),o(e),e):t}function u(e){return j(e)?e:[e]}function l(e,r){var n=typeof e===J?{field:e,dir:r}:e,i=j(n)?n:n!==t?[n]:[];return F(i,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function d(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}function f(e,t,r,n,i){t=t||[];var a,o,s,u=t.length;for(a=0;u>a;a++){o=t[a],s=o.aggregate;var l=o.field;e[l]=e[l]||{},e[l][s]=Ct[s.toLowerCase()](e[l][s],r,I.accessor(l),n,i)}}function g(e){var t,r=e.length,n=Array(r);for(t=0;r>t;t++)n[t]=e[t].toJSON();return n}function c(e,r){r=r||{};var n,o=new i(e),s=r.group,u=l(s||[]).concat(a(r.sort||[])),d=r.filter,f=r.skip,g=r.take;return d&&(o=o.filter(d),n=o.toArray().length),u&&(o=o.sort(u),s&&(e=o.toArray())),f!==t&&g!==t&&(o=o.range(f,g)),s&&(o=o.group(s,e)),{total:n,data:o.toArray()}}function p(e,t){t=t||{};var r=new i(e),n=t.aggregate,a=t.filter;return a&&(r=r.filter(a)),r.aggregate(n)}function h(e,t,r){var n,i,a,o;for(a=0,o=e.length;o>a;a++){n=e[a];for(i in t)n[i]=r._parse(i,t[i](n))}}function _(e,t,r){var n,i,a;for(i=0,a=e.length;a>i;i++)n=e[i],n.value=r._parse(n.field,n.value),n.hasSubgroups?_(n.items,t,r):h(n.items,t,r)}function v(e,t,r,n){return function(i){return i=e(i),i&&!G(n)&&("[object Array]"===ct.call(i)||i instanceof vt||(i=[i]),r(i,n,new t)),i||[]}}function m(e){var t,r,n=[];for(t=0,r=e.length;r>t;t++)n=e[t].hasSubgroups?n.concat(m(e[t].items)):n.concat(e[t].items.slice());return n}function y(e,t){var r,n,i,a;if(t)for(r=0,n=e.length;n>r;r++)i=e[r],a=i.items,i.hasSubgroups?y(a,t):!a.length||a[0]instanceof t||(a.type=t,a.wrapAll(a,a))}function w(e,t){var r,n;for(r=0,n=e.length;n>r;r++)if(e[r].hasSubgroups){if(w(e[r].items,t))return!0}else if(t(e[r].items,e[r]))return!0}function q(e,t){var r,n;for(r=0,n=e.length;n>r;r++)if(e[r].uid==t.uid)return t=e[r],e.splice(r,1),t}function x(e,t){var r,n,i,a;for(i=e.length-1,a=0;i>=a;i--)n=e[i],r={value:t.get(n.field),field:n.field,items:r?[r]:[t],hasSubgroups:!!r,aggregates:{}};return r}function k(e,t){return t?S(e,function(e){return e[t.idField]===t.id}):-1}function b(e,t){return t?S(e,function(e){return e.uid==t.uid}):-1}function S(e,t){var r,n;for(r=0,n=e.length;n>r;r++)if(t(e[r]))return r;return-1}function C(t,r){var n,i,a,o,s,u=e(t)[0].children,l=[],d=r[0],f=r[1];for(n=0,i=u.length;i>n;n++)a={},s=u[n],a[d.field]=s.text,o=s.attributes.value,o=o&&o.specified?s.value:s.text,a[f.field]=o,l.push(a);return l}function A(t,r){var n,i,a,o,s,u,l,d=e(t)[0].tBodies[0],f=d?d.rows:[],g=r.length,c=[];for(n=0,i=f.length;i>n;n++){for(s={},l=!0,o=f[n].cells,a=0;g>a;a++)u=o[a],"th"!==u.nodeName.toLowerCase()&&(l=!1,s[r[a].field]=u.innerHTML);l||c.push(s)}return c}function O(t,r){var n,i,a,o,s,u,l,d,f=e(t).children(),g=[],c=r[0].field,p=r[1]&&r[1].field,h=r[2]&&r[2].field,_=r[3]&&r[3].field;for(n=0,i=f.length;i>n;n++)a={},o=f.eq(n),u=o[0].firstChild,d=o.children(),t=d.filter("ul"),d=d.filter(":not(ul)"),s=o.attr("data-id"),s&&(a.id=s),u&&(a[c]=3==u.nodeType?u.nodeValue:d.text()),p&&(a[p]=d.find("a").attr("href")),_&&(a[_]=d.find("img").attr("src")),h&&(l=d.find(".k-sprite").prop("className"),a[h]=l&&e.trim(l.replace("k-sprite",""))),t.length&&(a.items=O(t.eq(0),r)),"true"==o.attr("data-hasChildren")&&(a.hasChildren=!0),g.push(a);return g}var F,z=e.extend,N=e.proxy,T=e.isFunction,P=e.isPlainObject,G=e.isEmptyObject,j=e.isArray,L=e.grep,R=e.ajax,M=e.each,D=e.noop,I=window.kendo,E=I.Observable,B=I.Class,J="string",U="function",V="create",H="read",Q="update",$="destroy",K="change",W="sync",X="get",Y="error",Z="requestStart",et="requestEnd",tt=[V,H,Q,$],rt=function(e){return e},nt=I.getter,it=I.stringify,at=Math,ot=[].push,st=[].join,ut=[].pop,lt=[].splice,dt=[].shift,ft=[].slice,gt=[].unshift,ct={}.toString,pt=I.support.stableSort,ht=/^\/Date\((.*?)\)\/$/,_t=/(?=['\\])/g,vt=E.extend({init:function(e,t){var r=this;r.type=t||mt,E.fn.init.call(r),r.length=e.length,r.wrapAll(e,r)},toJSON:function(){var e,t,r=this.length,n=Array(r);for(e=0;r>e;e++)t=this[e],t instanceof mt&&(t=t.toJSON()),n[e]=t;return n},parent:D,wrapAll:function(e,t){var r,n,i=this,a=function(){return i};for(t=t||[],r=0,n=e.length;n>r;r++)t[r]=i.wrap(e[r],a);return t},wrap:function(e,t){var r,n=this;return null!==e&&"[object Object]"===ct.call(e)&&(r=e instanceof n.type||e instanceof qt,r||(e=e instanceof mt?e.toJSON():e,e=new n.type(e)),e.parent=t,e.bind(K,function(e){n.trigger(K,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemchange":"itemchange"})})),e},push:function(){var e,t=this.length,r=this.wrapAll(arguments);return e=ot.apply(this,r),this.trigger(K,{action:"add",index:t,items:r}),e},slice:ft,join:st,pop:function(){var e=this.length,t=ut.apply(this);return e&&this.trigger(K,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,r){var n,i,a,o=this.wrapAll(ft.call(arguments,2));if(n=lt.apply(this,[e,t].concat(o)),n.length)for(this.trigger(K,{action:"remove",index:e,items:n}),i=0,a=n.length;a>i;i++)n[i].children&&n[i].unbind(K);return r&&this.trigger(K,{action:"add",index:e,items:o}),n},shift:function(){var e=this.length,t=dt.apply(this);return e&&this.trigger(K,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=gt.apply(this,t),this.trigger(K,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,r,n=this;for(t=0,r=n.length;r>t;t++)if(n[t]===e)return t;return-1}}),mt=E.extend({init:function(e){var t,r,n,i=this,a=function(){return i};E.fn.init.call(this);for(r in e)t=e[r],"_"!=r.charAt(0)&&(n=ct.call(t),t=i.wrap(t,r,a)),i[r]=t;i.uid=I.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_events"!==e&&typeof this[e]!==U&&"uid"!==e},toJSON:function(){var e,t,r={};for(t in this)this.shouldSerialize(t)&&(e=this[t],(e instanceof mt||e instanceof vt)&&(e=e.toJSON()),r[t]=e);return r},get:function(e){var t,r=this;return r.trigger(X,{field:e}),t="this"===e?r:I.getter(e,!0)(r)},_set:function(e,r){var n=this;if(e.indexOf("."))for(var i=e.split("."),a="";i.length>1;){a+=i.shift();var o=I.getter(a,!0)(n);if(o instanceof mt)return o.set(i.join("."),r),t;a+="."}I.setter(e)(n,r)},set:function(e,t){var r=this,n=I.getter(e,!0)(r),i=function(){return r};n!==t&&(r.trigger("set",{field:e,value:t})||(r._set(e,r.wrap(t,e,i)),r.trigger(K,{field:e})))},parent:D,wrap:function(e,r,n){var i=this,a=ct.call(e),o=e instanceof vt;return null===e||e===t||"[object Object]"!==a||e instanceof Nt||o?null===e||"[object Array]"!==a&&!o?null!==e&&e instanceof Nt&&(e._parent=n):(o||(e=new vt(e)),e.parent=n,function(t){e.bind(K,function(e){i.trigger(K,{field:t,index:e.index,items:e.items,action:e.action})})}(r)):(e instanceof mt||(e=new mt(e)),e.parent=n,function(t){e.bind(X,function(e){e.field=t+"."+e.field,i.trigger(X,e)}),e.bind(K,function(e){e.field=t+"."+e.field,i.trigger(K,e)})}(r)),e}}),yt={number:function(e){return I.parseFloat(e)},date:function(e){return I.parseDate(e)},"boolean":function(e){return typeof e===J?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},"default":function(e){return e}},wt={string:"",number:0,date:new Date,"boolean":!1,"default":""},qt=mt.extend({init:function(r){var n=this;(!r||e.isEmptyObject(r))&&(r=e.extend({},n.defaults,r)),mt.fn.init.call(n,r),n.dirty=!1,n.idField&&(n.id=n.get(n.idField),n.id===t&&(n.id=n._defaultId))},shouldSerialize:function(e){return mt.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var r,i=this,a=e,o=i.fields||{};return e=o[e],e||(e=n(o,a)),e&&(r=e.parse,!r&&e.type&&(r=yt[e.type.toLowerCase()])),r?r(t):t},editable:function(e){return e=(this.fields||{})[e],e?e.editable!==!1:!0},set:function(e,t,n){var i=this;i.editable(e)&&(t=i._parse(e,t),r(t,i.get(e))||(i.dirty=!0,mt.fn.set.call(i,e,t,n)))},accept:function(e){var t,r=this,n=function(){return r};for(t in e)r._set(t,r.wrap(e[t],t,n));r.idField&&(r.id=r.get(r.idField)),r.dirty=!1},isNew:function(){return this.id===this._defaultId}});qt.define=function(e,r){r===t&&(r=e,e=qt);var n,i,a,o,s,u=z({defaults:{}},r),l=u.id;l&&(u.idField=l),u.id&&delete u.id,l&&(u.defaults[l]=u._defaultId="");for(i in u.fields)a=u.fields[i],o=a.type||"default",s=null,i=typeof a.field===J?a.field:i,a.nullable||(s=u.defaults[i]=a.defaultValue!==t?a.defaultValue:wt[o.toLowerCase()]),r.id===i&&(u._defaultId=s),u.defaults[i]=s,a.parse=a.parse||yt[o];return n=e.extend(u),n.define=function(e){return qt.define(n,e)},u.fields&&(n.fields=u.fields,n.idField=u.idField),n};var xt={selector:function(e){return T(e)?e:nt(e)},asc:function(e){var t=this.selector(e);return function(e,r){return e=t(e),r=t(r),null==e&&null==r?0:e&&!r||null==r?1:r&&!e?-1:e>r?1:r>e?-1:0}},desc:function(e){var t=this.selector(e);return function(e,r){return e=t(e),r=t(r),null==e&&null==r?0:e&&!r||null==r?-1:r&&!e||null==e?1:r>e?1:e>r?-1:0}},create:function(e){return this[e.dir.toLowerCase()](e.field)},combine:function(e){return function(t,r){var n,i,a=e[0](t,r);for(n=1,i=e.length;i>n;n++)a=a||e[n](t,r);return a}}},kt=z({},xt,{asc:function(e){var t=this.selector(e);return function(e,r){var n=t(e),i=t(r);return n&&n.getTime&&i&&i.getTime&&(n=n.getTime(),i=i.getTime()),n===i?e.__position-r.__position:null==i?1:n>i?1:i>n?-1:0}},desc:function(e){var t=this.selector(e);return function(e,r){var n=t(e),i=t(r);return n&&n.getTime&&i&&i.getTime&&(n=n.getTime(),i=i.getTime()),n===i?e.__position-r.__position:i>n?1:n>i?-1:0}}});F=function(e,t){var r,n=e.length,i=Array(n);for(r=0;n>r;r++)i[r]=t(e[r],r,e);return i};var bt=function(){function e(e){return e.replace(_t,"\\")}function t(t,r,n,i){var a;return null!=n&&(typeof n===J&&(n=e(n),a=ht.exec(n),a?n=new Date(+a[1]):i?(n="'"+n.toLowerCase()+"'",r="("+r+" || '').toLowerCase()"):n="'"+n+"'"),n.getTime&&(r="("+r+"?"+r+".getTime():"+r+")",n=n.getTime())),r+" "+t+" "+n}return{eq:function(e,r,n){return t("==",e,r,n)},neq:function(e,r,n){return t("!=",e,r,n)},gt:function(e,r,n){return t(">",e,r,n)},gte:function(e,r,n){return t(">=",e,r,n)},lt:function(e,r,n){return t("<",e,r,n)},lte:function(e,r,n){return t("<=",e,r,n)},startswith:function(t,r,n){return n&&(t+=".toLowerCase()",r&&(r=r.toLowerCase())),r&&(r=e(r)),t+".lastIndexOf('"+r+"', 0) == 0"},endswith:function(t,r,n){return n&&(t+=".toLowerCase()",r&&(r=r.toLowerCase())),r&&(r=e(r)),t+".indexOf('"+r+"', "+t+".length - "+(r||"").length+") >= 0"},contains:function(t,r,n){return n&&(t="("+t+" || '').toLowerCase()",r&&(r=r.toLowerCase())),r&&(r=e(r)),t+".indexOf('"+r+"') >= 0"},doesnotcontain:function(t,r,n){return n&&(t="("+t+" || '').toLowerCase()",r&&(r=r.toLowerCase())),r&&(r=e(r)),t+".indexOf('"+r+"') == -1"}}}();i.filterExpr=function(e){var r,n,a,o,s,u,l=[],d={and:" && ",or:" || "},f=[],g=[],c=e.filters;for(r=0,n=c.length;n>r;r++)a=c[r],s=a.field,u=a.operator,a.filters?(o=i.filterExpr(a),a=o.expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(g.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(f.length+t)+"]"}),g.push.apply(g,o.operators),f.push.apply(f,o.fields)):(typeof s===U?(o="__f["+f.length+"](d)",f.push(s)):o=I.expr(s),typeof u===U?(a="__o["+g.length+"]("+o+", "+a.value+")",g.push(u)):a=bt[(u||"eq").toLowerCase()](o,a.value,a.ignoreCase!==t?a.ignoreCase:!0)),l.push(a);return{expression:"("+l.join(d[e.logic])+")",fields:f,operators:g}};var St={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"};i.normalizeFilter=s,i.prototype={toArray:function(){return this.data},range:function(e,t){return new i(this.data.slice(e,e+t))},skip:function(e){return new i(this.data.slice(e))},take:function(e){return new i(this.data.slice(0,e))},select:function(e){return new i(F(this.data,e))},orderBy:function(e){var t=this.data.slice(0),r=T(e)||!e?xt.asc(e):e.compare;return new i(t.sort(r))},orderByDescending:function(e){return new i(this.data.slice(0).sort(xt.desc(e)))},sort:function(e,t,r){var n,i,o=a(e,t),s=[];if(r=r||xt,o.length){for(n=0,i=o.length;i>n;n++)s.push(r.create(o[n]));return this.orderBy({compare:r.combine(s)})}return this},filter:function(e){var t,r,n,a,o,u,l,d,f=this.data,g=[];if(e=s(e),!e||0===e.filters.length)return this;for(a=i.filterExpr(e),u=a.fields,l=a.operators,o=d=Function("d, __f, __o","return "+a.expression),(u.length||l.length)&&(d=function(e){return o(e,u,l)}),t=0,n=f.length;n>t;t++)r=f[t],d(r)&&g.push(r);return new i(g)},group:function(e,t){e=l(e||[]),t=t||this.data;var r,n=this,a=new i(n.data);return e.length>0&&(r=e[0],a=a.groupBy(r).select(function(n){var a=new i(t).filter([{field:n.field,operator:"eq",value:n.value}]);return{field:n.field,value:n.value,items:e.length>1?new i(n.items).group(e.slice(1),a.toArray()).toArray():n.items,hasSubgroups:e.length>1,aggregates:a.aggregate(r.aggregates)}})),a},groupBy:function(e){if(G(e)||!this.data.length)return new i([]);var t,r,n,a,o=e.field,s=this._sortForGrouping(o,e.dir||"asc"),u=I.accessor(o),l=u.get(s[0],o),f={field:o,value:l,items:[]},g=[f];for(n=0,a=s.length;a>n;n++)t=s[n],r=u.get(t,o),d(l,r)||(l=r,f={field:o,value:l,items:[]},g.push(f)),f.items.push(t);return new i(g)},_sortForGrouping:function(e,t){var r,n,a=this.data;if(!pt){for(r=0,n=a.length;n>r;r++)a[r].__position=r;for(a=new i(a).sort(e,t,kt).toArray(),r=0,n=a.length;n>r;r++)delete a[r].__position;return a}return this.sort(e,t).toArray()},aggregate:function(e){var t,r,n={};if(e&&e.length)for(t=0,r=this.data.length;r>t;t++)f(n,e,this.data[t],t,r);return n}};var Ct={sum:function(e,t,r){return(e||0)+r.get(t)},count:function(e){return(e||0)+1},average:function(e,t,r,n,i){return e=(e||0)+r.get(t),n==i-1&&(e/=i),e},max:function(e,t,r){var n=r.get(t);return e=e||0,n>e&&(e=n),e},min:function(e,t,r){var n=r.get(t);return e=e||n,e>n&&(e=n),e}},At=B.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),Ot=B.extend({init:function(e){var t,r=this;e=r.options=z({},r.options,e),M(tt,function(t,r){typeof e[r]===J&&(e[r]={url:e[r]})}),r.cache=e.cache?Ft.create(e.cache):{find:D,add:D},t=e.parameterMap,r.parameterMap=T(t)?t:function(e){var r={};return M(e,function(e,n){e in t&&(e=t[e],P(e)&&(n=e.value(n),e=e.key)),r[e]=n}),r}},options:{parameterMap:rt},create:function(e){return R(this.setup(e,V))},read:function(r){var n,i,a,o=this,s=o.cache;r=o.setup(r,H),n=r.success||D,i=r.error||D,a=s.find(r.data),a!==t?n(a):(r.success=function(e){s.add(r.data,e),n(e)},e.ajax(r))},update:function(e){return R(this.setup(e,Q))},destroy:function(e){return R(this.setup(e,$))},setup:function(e,t){e=e||{};var r,n=this,i=n.options[t],a=T(i.data)?i.data(e.data):i.data;return e=z(!0,{},i,e),r=z(!0,{},a,e.data),e.data=n.parameterMap(r,t),T(e.url)&&(e.url=e.url(r)),e}}),Ft=B.extend({init:function(){this._store={}},add:function(e,r){e!==t&&(this._store[it(e)]=r)},find:function(e){return this._store[it(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[it(e)]}});Ft.create=function(e){var t={inmemory:function(){return new Ft}};return P(e)&&T(e.find)?e:e===!0?new Ft:t[e]()};var zt=B.extend({init:function(e){var t,r,n,i,a=this;e=e||{};for(t in e)r=e[t],a[t]=typeof r===J?nt(r):r;if(i=e.modelBase||qt,P(a.model)&&(a.model=n=i.define(a.model)),a.model){var o=N(a.data,a),s=N(a.groups,a),u={};n=a.model,n.fields&&M(n.fields,function(e,t){P(t)&&t.field?u[t.field]=nt(t.field):u[e]=nt(e)}),a.data=v(o,n,h,u),a.groups=v(s,n,_,u)}},errors:function(e){return e?e.errors:null},parse:rt,data:rt,total:function(e){return e.length},groups:rt,status:function(e){return e.status},aggregates:function(){return{}}}),Nt=E.extend({init:function(e){var r,n,i,o=this;e&&(i=e.data),e=o.options=z({},o.options,e),z(o,{_map:{},_prefetch:{},_data:[],_ranges:[],_view:[],_pristine:[],_destroyed:[],_pageSize:e.pageSize,_page:e.page||(e.pageSize?1:t),_sort:a(e.sort),_filter:s(e.filter),_group:l(e.group),_aggregate:e.aggregate,_total:e.total}),E.fn.init.call(o),n=e.transport,n?(n.read=typeof n.read===J?{url:n.read}:n.read,e.type&&(I.data.transports[e.type]&&!P(I.data.transports[e.type])?o.transport=new I.data.transports[e.type](z(n,{data:i})):n=z(!0,{},I.data.transports[e.type],n),e.schema=z(!0,{},I.data.schemas[e.type],e.schema)),o.transport||(o.transport=T(n.read)?n:new Ot(n))):o.transport=new At({data:e.data}),o.reader=new I.data.readers[e.schema.type||"json"](e.schema),r=o.reader.model||{},o._data=o._observe(o._data),o.bind([Y,K,Z,W,et],e)},options:{data:[],schema:{modelBase:qt},serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,sendAllFields:!0,batch:!1},_flatData:function(e){return this.options.serverGrouping&&this.group().length?m(e):e},get:function(e){var t,r,n=this._flatData(this._data);for(t=0,r=n.length;r>t;t++)if(n[t].id==e)return n[t]},getByUid:function(e){var t,r,n=this._flatData(this._data);if(n)for(t=0,r=n.length;r>t;t++)if(n[t].uid==e)return n[t]},sync:function(){var t,r,n=this,i=[],a=[],o=n._destroyed,s=n._flatData(n._data);if(n.reader.model){for(t=0,r=s.length;r>t;t++)s[t].isNew()?i.push(s[t]):s[t].dirty&&a.push(s[t]);var u=n._send("create",i);u.push.apply(u,n._send("update",a)),u.push.apply(u,n._send("destroy",o)),e.when.apply(null,u).then(function(){var e,t;for(e=0,t=arguments.length;t>e;e++)n._accept(arguments[e]);n._change({action:"sync"}),n.trigger(W)})}},_accept:function(t){var r,n=this,i=t.models,a=t.response,o=0,s=n.options.serverGrouping&&n.group()&&n.group().length,u=n.reader.data(n._pristine),l=t.type;if(n.trigger(et,{response:a,type:l}),a){if(a=n.reader.parse(a),n._handleCustomErrors(a))return;a=n.reader.data(a),e.isArray(a)||(a=[a])}else a=e.map(i,function(e){return e.toJSON()});for("destroy"===l&&(n._destroyed=[]),o=0,r=i.length;r>o;o++)"destroy"!==l?(i[o].accept(a[o]),"create"===l?u.push(s?x(n.group(),i[o]):a[o]):"update"===l&&(s?n._updatePristineGroupModel(i[o],a[o]):z(u[n._pristineIndex(i[o])],a[o]))):s?n._removePristineGroupModel(i[o]):u.splice(n._pristineIndex(i[o]),1)},_pristineIndex:function(e){var t,r,n=this,i=n.reader.data(n._pristine);for(t=0,r=i.length;r>t;t++)if(i[t][e.idField]===e.id)return t;return-1},_updatePristineGroupModel:function(e,r){var n,i=this.reader.groups(this._pristine);w(i,function(i){return n=k(i,e),n>-1?(z(!0,i[n],r),!0):t})},_removePristineGroupModel:function(e){var r,n=this.reader.groups(this._pristine);w(n,function(n){return r=k(n,e),r>-1?(n.splice(r,1),!0):t})},_promise:function(t,r,n){var i=this,a=i.transport;return e.Deferred(function(e){a[n].call(a,z({success:function(t){e.resolve({response:t,models:r,type:n})},error:function(t,r,n){e.reject(t),i.error(t,r,n)}},t))}).promise()},_send:function(e,t){var r,n,i=this,a=[];if(i.options.batch)t.length&&a.push(i._promise({data:{models:g(t)}},t,e));else for(r=0,n=t.length;n>r;r++)a.push(i._promise({data:t[r].toJSON()},[t[r]],e));return a},add:function(e){return this.insert(this._data.length,e)},insert:function(e,t){return t||(t=e,e=0),t instanceof qt||(t=this.reader.model?new this.reader.model(t):new mt(t)),this.options.serverGrouping&&this.group()&&this.group().length?this._data.splice(e,0,x(this.group(),t)):this._data.splice(e,0,t),t},cancelChanges:function(e){var t,r,n=this,i=n.options.serverGrouping&&n.group()&&n.group().length,a=i?n.reader.groups:n.reader.data,o=a(n._pristine);e instanceof I.data.Model?i?n._cancelGroupModel(e):(r=n.indexOf(e),t=n._pristineIndex(e),-1!=r&&(-1==t||e.isNew()?n._data.splice(r,1):n._data[r].accept(o[t]))):(n._destroyed=[],n._data=n._observe(o),n._change())},read:function(e){var t=this,r=t._params(e);t._queueRequest(r,function(){t.trigger(Z),t._ranges=[],t.transport.read({data:r,success:N(t.success,t),error:N(t.error,t)})})},_cancelGroupModel:function(e){var r,n,i=this.reader.groups(this._pristine);w(i,function(i){return n=k(i,e),n>-1?(r=i[n],!0):t}),n>-1&&w(this._data,function(t){n=b(t,e),n>-1&&(e.isNew()?t.splice(n,1):z(!0,t[n],r))})},indexOf:function(e){return b(this._data,e)},_params:function(e){var t=this,r=z({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate},e);return t.options.serverPaging||(delete r.take,delete r.skip,delete r.page,delete r.pageSize),t.options.serverGrouping||delete r.group,t.options.serverFiltering||delete r.filter,t.options.serverSorting||delete r.sort,t.options.serverAggregates||delete r.aggregate,r},_queueRequest:function(e,r){var n=this;n._requestInProgress?n._pending={callback:N(r,n),options:e}:(n._requestInProgress=!0,n._pending=t,r())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},remove:function(e){var t=this._data;return this.options.serverGrouping&&this.group()&&this.group().length?this._removeGroupItem(t,e):q(t,e)},_removeGroupItem:function(e,r){var n,i=this;return w(e,function(e){return n=q(e,r),n?(n.isNew&&n.isNew()||i._destroyed.push(n),!0):t}),r},error:function(e,t,r){this._dequeueRequest(),this.trigger(et,{}),this.trigger(Y,{xhr:e,status:t,errorThrown:r})},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(Y,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_parent:D,success:function(r){var n=this,i=n.options,a=i.serverGrouping===!0&&n._group&&n._group.length>0;if(n.trigger(et,{response:r,type:"read"}),r=n.reader.parse(r),n._handleCustomErrors(r))return n._dequeueRequest(),t;n._pristine=P(r)?e.extend(!0,{},r):r.slice?r.slice(0):r,n._total=n.reader.total(r),n._aggregate&&i.serverAggregates&&(n._aggregateResult=n.reader.aggregates(r)),r=a?n.reader.groups(r):n.reader.data(r),n._data=n._observe(r);var o=n._skip||0,s=o+n._data.length;n._ranges.push({start:o,end:s,data:n._data}),n._ranges.sort(function(e,t){return e.start-t.start}),n._dequeueRequest(),n._process(n._data)},_observe:function(e){var t=this,r=t.reader.model,n=!1;return r&&e.length&&(n=!(e[0]instanceof r)),e instanceof vt?n&&(e.type=t.reader.model,e.wrapAll(e,e)):(e=new vt(e,t.reader.model),e.parent=function(){return t._parent()}),t.group()&&t.group().length&&t.options.serverGrouping&&y(e,r),e.bind(K,N(t._change,t))},_change:function(e){var t,r,n=this,i=e?e.action:"";if("remove"===i)for(t=0,r=e.items.length;r>t;t++)e.items[t].isNew&&e.items[t].isNew()||n._destroyed.push(e.items[t]);if(!n.options.autoSync||"add"!==i&&"remove"!==i&&"itemchange"!==i){var a=n._total||n.reader.total(n._pristine);"add"===i?a++:"remove"===i?a--:"itemchange"===i||n.options.serverPaging||(a=n.reader.total(n._pristine)),n._total=a,n._process(n._data,e)}else n.sync()},_process:function(e,r){var n,i=this,a={};i.options.serverPaging!==!0&&(a.skip=i._skip,a.take=i._take||i._pageSize,a.skip===t&&i._page!==t&&i._pageSize!==t&&(a.skip=(i._page-1)*i._pageSize)),i.options.serverSorting!==!0&&(a.sort=i._sort),i.options.serverFiltering!==!0&&(a.filter=i._filter),i.options.serverGrouping!==!0&&(a.group=i._group),i.options.serverAggregates!==!0&&(a.aggregate=i._aggregate,i._aggregateResult=p(e,a)),n=c(e,a),i._view=n.data,n.total===t||i.options.serverFiltering||(i._total=n.total),r=r||{},r.items=r.items||i._view,i.trigger(K,r)},at:function(e){return this._data[e]},data:function(e){var r=this;return e===t?r._data:(r._data=this._observe(e),r._total=r._data.length,r._process(r._data),t)},view:function(){return this._view},query:function(e){var r,n=this,i=n.options.serverSorting||n.options.serverPaging||n.options.serverFiltering||n.options.serverGrouping||n.options.serverAggregates;e!==t&&(n._pageSize=e.pageSize,n._page=e.page,n._sort=e.sort,n._filter=e.filter,n._group=e.group,n._aggregate=e.aggregate,n._skip=e.skip,n._take=e.take,n._skip===t&&(n._skip=n.skip(),e.skip=n.skip()),n._take===t&&n._pageSize!==t&&(n._take=n._pageSize,e.take=n._take),e.sort&&(n._sort=e.sort=a(e.sort)),e.filter&&(n._filter=e.filter=s(e.filter)),e.group&&(n._group=e.group=l(e.group)),e.aggregate&&(n._aggregate=e.aggregate=u(e.aggregate))),i||n._data===t||0===n._data.length?n.read(e):(n.trigger(Z),r=c(n._data,e),n.options.serverFiltering||(n._total=r.total!==t?r.total:n._data.length),n._view=r.data,n._aggregateResult=p(n._data,e),n.trigger(K,{items:r.data}))},fetch:function(e){var t=this;e&&T(e)&&t.one(K,e),t._query()},_query:function(e){var t=this;t.query(z({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var r=this,n=r.page(),i=r.total();return e=e||{},!n||i&&n+1>r.totalPages()?t:(r._skip=n*r.take(),n+=1,e.page=n,r._query(e),n)},prev:function(e){var r=this,n=r.page();return e=e||{},n&&1!==n?(r._skip=r._skip-r.take(),n-=1,e.page=n,r._query(e),n):t},page:function(e){var r,n=this;return e!==t?(e=at.max(at.min(at.max(e,1),n.totalPages()),1),n._query({page:e}),t):(r=n.skip(),r!==t?at.round((r||0)/(n.take()||1))+1:t)},pageSize:function(e){var r=this;return e!==t?(r._query({pageSize:e,page:1}),t):r.take()},sort:function(e){var r=this;return e!==t?(r._query({sort:e}),t):r._sort},filter:function(e){var r=this;return e===t?r._filter:(r._query({filter:e,page:1}),t)},group:function(e){var r=this;return e!==t?(r._query({group:e}),t):r._group},total:function(){return this._total||0},aggregate:function(e){var r=this;return e!==t?(r._query({aggregate:e}),t):r._aggregate},aggregates:function(){return this._aggregateResult},totalPages:function(){var e=this,t=e.pageSize()||e.total();return at.ceil((e.total()||0)/t)},inRange:function(e,t){var r=this,n=at.min(e+t,r.total());return!r.options.serverPaging&&r.data.length>0?!0:r._findRange(e,n).length>0},range:function(e,r){e=at.min(e||0,this.total());var n,i=this,a=at.max(at.floor(e/r),0)*r,o=at.min(a+r,i.total());if(n=i._findRange(e,at.min(e+r,i.total())),n.length){i._skip=e>i.skip()?at.min(o,(i.totalPages()-1)*i.take()):a,i._take=r;var s=i.options.serverPaging,u=i.options.serverSorting,l=i.options.serverFiltering;try{i.options.serverPaging=!0,i.options.serverSorting=!0,i.options.serverFiltering=!0,s&&(i._data=n=i._observe(n)),i._process(n)}finally{i.options.serverPaging=s,i.options.serverSorting=u,i.options.serverFiltering=l}}else r!==t&&(i._rangeExists(a,o)?e>a&&i.prefetch(o,r,function(){i.range(e,r)}):i.prefetch(a,r,function(){e>a&&i.total()>o&&!i._rangeExists(o,at.min(o+r,i.total()))?i.prefetch(o,r,function(){i.range(e,r)}):i.range(e,r)}))},_findRange:function(e,r){var n,i,a,o,s,u,l,d,f,g=this,p=g._ranges,h=[],_=g.options,v=_.serverSorting||_.serverPaging||_.serverFiltering||_.serverGrouping||_.serverAggregates;for(i=0,f=p.length;f>i;i++)if(n=p[i],e>=n.start&&n.end>=e){var m=0;for(a=i;f>a;a++)if(n=p[a],n.data.length&&e+m>=n.start&&(u=n.data,l=n.end,v||(d=c(n.data,{sort:g.sort(),filter:g.filter()}),u=d.data,d.total!==t&&(l=d.total)),o=0,e+m>n.start&&(o=e+m-n.start),s=u.length,l>r&&(s-=l-r),m+=s-o,h=h.concat(u.slice(o,s)),n.end>=r&&m==r-e))return h;break}return[]},skip:function(){var e=this;return e._skip===t?e._page!==t?(e._page-1)*(e.take()||1):t:e._skip},take:function(){var e=this;return e._take||e._pageSize},prefetch:function(e,t,r){var n=this,i=at.min(e+t,n.total()),a={start:e,end:i,data:[]},o={take:t,skip:e,page:e/t+1,pageSize:t,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};n._rangeExists(e,i)?r&&r():(clearTimeout(n._timeout),n._timeout=setTimeout(function(){n._queueRequest(o,function(){n.transport.read({data:o,success:function(t){n._dequeueRequest();for(var i=!1,o=0,s=n._ranges.length;s>o;o++)if(n._ranges[o].start===e){i=!0,a=n._ranges[o];break}i||n._ranges.push(a),t=n.reader.parse(t),a.data=n._observe(n.reader.data(t)),a.end=a.start+a.data.length,n._ranges.sort(function(e,t){return e.start-t.start}),n._total=n.reader.total(t),r&&r()}})})},100))},_rangeExists:function(e,t){var r,n,i=this,a=i._ranges;for(r=0,n=a.length;n>r;r++)if(e>=a[r].start&&a[r].end>=t)return!0;return!1}});Nt.create=function(e){e=e&&e.push?{data:e}:e;var t,r,n,i=e||{},a=i.data,o=i.fields,s=i.table,u=i.select,l={};if(a||!o||i.transport||(s?a=A(s,o):u&&(a=C(u,o))),I.data.Model&&o&&(!i.schema||!i.schema.model)){for(t=0,r=o.length;r>t;t++)n=o[t],n.type&&(l[n.field]=n);G(l)||(i.schema=z(!0,i.schema,{model:{fields:l}}))}return i.data=a,i instanceof Nt?i:new Nt(i)};var Tt=qt.define({init:function(e){var t=this,r=t.hasChildren||e&&e.hasChildren,n="items",i={};I.data.Model.fn.init.call(t,e),typeof t.children===J&&(n=t.children),i={schema:{data:n,model:{hasChildren:r,id:t.idField}}},typeof t.children!==J&&z(i,t.children),i.data=e,r||(r=i.schema.data),typeof r===J&&(r=I.getter(r)),T(r)&&(t.hasChildren=!!r.call(t,t)),t._childrenOptions=i,t.hasChildren&&t._initChildren(),t._loaded=!(!e||!e[n])},_initChildren:function(){var e=this,t=e._childrenOptions.schema.data;e.children instanceof Pt||(e.children=new Pt(e._childrenOptions),e.children._parent=function(){return e},e.children.bind(K,function(t){t.node=t.node||e,e.trigger(K,t)}),t&&(e[t]=e.children.data()))},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},load:function(){var e=this,r={};e._initChildren(),(!e._loaded||e.hasChildren)&&(r[e.idField||"id"]=e.id,e._loaded||(e.children._data=t),e.children.one(K,function(){e._loaded=!0})._query(r))},parentNode:function(){var e=this.parent();return e.parent()},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return qt.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}}),Pt=Nt.extend({init:function(e){var t=Tt.define({children:e});Nt.fn.init.call(this,z(!0,{},{schema:{modelBase:t,model:t}},e))},remove:function(e){var t,r=e.parentNode(),n=this;return r&&(n=r.children),t=Nt.fn.remove.call(n,e),r&&!n.data().length&&(r.hasChildren=!1),t},insert:function(e,t){var r=this._parent();return r&&(r.hasChildren=!0,r._initChildren()),Nt.fn.insert.call(this,e,t)},_find:function(e,t){var r,n,i,a,o;if(i=Nt.fn[e].call(this,t))return i;if(a=this._flatData(this.data()))for(r=0,n=a.length;n>r;r++)if(o=a[r].children,o instanceof Pt&&(i=o[e](t)))return i},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}});Pt.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},r=t.data,n=t.fields,i=t.list;return r&&r._dataSource?r._dataSource:(r||!n||t.transport||i&&(r=O(i,n)),t.data=r,t instanceof Pt?t:new Pt(t))},z(!0,I.data,{readers:{json:zt},Query:i,DataSource:Nt,HierarchicalDataSource:Pt,Node:Tt,ObservableObject:mt,ObservableArray:vt,LocalTransport:At,RemoteTransport:Ot,Cache:Ft,DataReader:zt,Model:qt})})(window.kendo.jQuery);