/*
* Kendo UI Complete v2012.3.1315 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(t){function e(e){e.preventDefault();var n=t(e.data.root),i=n.closest(".k-widget").parent();i[0]||(i=n.parent()),i.trigger(t.Event(e.type,{target:n[0]}))}function n(t,e){var n=t.x.location,i=t.y.location,o=e.x.location,r=e.y.location,a=n-o,s=i-r;return{center:{x:(n+o)/2,y:(i+r)/2},distance:Math.sqrt(a*a+s*s)}}function i(t){var e,n,i,o=[],a=t.originalEvent,s=0;if(t.api)o.push({id:2,event:t,target:t.target,location:t});else if(t.type.match(/touch/))for(n=a?a.changedTouches:[],e=n.length;e>s;s++)i=n[s],o.push({location:i,event:t,target:i.target,id:i.identifier});else r.pointers?o.push({location:a,event:t,target:t.target,id:a.pointerId}):o.push({id:1,event:t,target:t.target,location:t});return o}var o=window.kendo,r=o.support,a=r.pointers,s=window.document,c=t(s.documentElement),u=o.Class,h=o.Observable,l=t.now,d=t.extend,p=r.mobileOS,f=p&&p.android,g="press",v="start",_="move",m="end",y="cancel",T="tap",x="gesturestart",w="gesturechange",D="gestureend",S="gesturetap",E=u.extend({init:function(t,e){var n=this;n.axis=t,n._updateLocationData(e),n.startLocation=n.location,n.velocity=n.delta=0,n.timeStamp=l()},move:function(t){var e=this,n=t["page"+e.axis],i=l(),o=i-e.timeStamp||1;(n||!f)&&(e.delta=n-e.location,e._updateLocationData(t),e.initialDelta=n-e.startLocation,e.velocity=e.delta/o,e.timeStamp=i)},_updateLocationData:function(t){var e=this,n=e.axis;e.location=t["page"+n],e.client=t["client"+n],e.screen=t["screen"+n]}}),M=u.extend({init:function(t,e,n){var i=this;d(i,{x:new E("X",n.location),y:new E("Y",n.location),userEvents:t,target:e,currentTarget:n.currentTarget,id:n.id,_moved:!1,_finished:!1}),i._trigger(g,n)},move:function(t){var e=this;if(!e._finished){if(e.x.move(t.location),e.y.move(t.location),!e._moved){if(e._withinIgnoreThreshold())return;if(b.current&&b.current!==e.userEvents)return e.dispose();e._start(t)}e._finished||e._trigger(_,t)}},end:function(t){var e=this;e.endTime=l(),e._finished||(e._moved?e._trigger(m,t):e._trigger(T,t),e.dispose())},dispose:function(){var e=this,n=e.userEvents,i=n.touches;e._finished=!0,i.splice(t.inArray(e,i),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(t){this.startTime=l(),this._moved=!0,this._trigger(v,t)},_trigger:function(t,e){var n=this,i=e.event,o={touch:n,x:n.x,y:n.y,target:n.target,event:i};n.userEvents.notify(t,o)&&i.preventDefault()},_withinIgnoreThreshold:function(){var t=this.x.initialDelta,e=this.y.initialDelta;return this.userEvents.threshold>=Math.sqrt(t*t+e*e)}}),b=h.extend({init:function(n,i){var s,u=this;if(i=i||{},s=u.filter=i.filter,u.threshold=i.threshold||0,u.touches=[],u._maxTouches=i.multiTouch?2:1,u.eventNS=o.guid(),n=t(n).handler(u).autoApplyNS(u.eventNS),h.fn.init.call(u),d(u,{element:n,surface:i.global?c:i.surface||n,stopPropagation:i.stopPropagation,pressed:!1}),u.surface.handler(u).autoApplyNS(u.eventNS).on("move","_move").on("up cancel","_end"),n.on("down",s,"_start"),a&&n.css("-ms-touch-action","pinch-zoom double-tap-zoom"),i.preventDragEvent&&n.on("dragstart",o.preventDefault),i.allowSelection||n.on("mousedown selectstart",s,{root:n},e),r.eventCapture)for(var l=o.eventMap.up.split(" "),p=0,f=l.length,E=u.surface[0],M=function(t){u._isMoved()&&t.preventDefault()};f>p;p++)E.addEventListener(l[p],M,!0);u.bind([g,T,v,_,m,y,x,w,D,S],i)},destroy:function(){var t=this;t.element.kendoDestroy(t.eventNS),t.surface.kendoDestroy(t.eventNS),t._disposeAll()},capture:function(){b.current=this},cancel:function(){this._disposeAll(),this.trigger(y)},notify:function(e,i){var o=this,r=o.touches;if(this._isMultiTouch()){switch(e){case _:e=w;break;case m:e=D;break;case T:e=S}t.extend(i,{touches:r},n(r[0],r[1]))}return this.trigger(e,i)},press:function(t,e,n){this._apiCall("_start",t,e,n)},move:function(t,e){this._apiCall("_move",t,e)},end:function(t,e){this._apiCall("_end",t,e)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){t.each(this.touches,function(){this.dispose()})},_isMoved:function(){return t.grep(this.touches,function(t){return t.isMoved()}).length},_start:function(e){var n,o,r=this,a=0,s=r.filter,c=i(e),u=c.length;if(!r._maxTouchesReached())for(b.current=null,r.currentTarget=e.currentTarget,r.stopPropagation&&e.stopPropagation();u>a&&!r._maxTouchesReached();a++)o=c[a],n=t(o.target),n=s?n.is(s)?n:n.closest(s,r.element):r.element,n.length&&(r.touches.push(new M(r,n,o)),r._isMultiTouch()&&r.notify("gesturestart",{}))},_move:function(t){this._eachTouch("move",t)},_end:function(t){this._eachTouch("end",t)},_eachTouch:function(t,e){var n,o,r,a,s=this,c={},u=i(e),h=s.touches;for(n=0;h.length>n;n++)o=h[n],c[o.id]=o;for(n=0;u.length>n;n++)r=u[n],a=c[r.id],a&&a[t](r)},_apiCall:function(e,n,i,o){this[e]({api:!0,pageX:n,pageY:i,target:o||this.element,stopPropagation:t.noop,preventDefault:t.noop})}});o.getTouches=i,o.touchDelta=n,o.UserEvents=b})(window.kendo.jQuery);